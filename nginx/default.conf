# mokko.jp へのアクセスをまとめて処理するサーバーブロック
server {
    listen 80;
    server_name mokko.jp; # あなたのドメイン名を指定

    # /hello/ というパスでアクセスが来た場合のルール
    location /hello/ {
        # webappという名前のサービス(ポート5000)に転送する
        proxy_pass http://webapp:5000/; # ←末尾に / を付けるのがポイント
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # /tetris/ というパスでアクセスが来た場合のルール
    location /tetris/ {
        # tetrisという名前のサービス(ポート80)に転送する
        proxy_pass http://tetris:80/; # ←末尾に / を付けるのがポイント
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # /geo-shikucho/ というパスでアクセスが来た場合のルール
    location /geo-shikucho/ {
        # geo-shikuchoという名前のサービス(ポート80)に転送する
        proxy_pass http://geo-shikucho:80/; # ←末尾に / を付けるのがポイント
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}